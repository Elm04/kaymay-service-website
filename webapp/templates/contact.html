{% extends 'base.html' %}

{% block title %}Kaymay Services - Contact{% endblock %}

{% block extra_css %}
<style>
    .contact-section {
        padding: 60px 0;
    }
    .contact-form input,
    .contact-form textarea {
        width: 100%;
        padding: 12px;
        margin-bottom: 15px;
        border: 1px solid #ddd;
        border-radius: 4px;
        transition: border 0.3s;
    }
    .contact-form input:focus,
    .contact-form textarea:focus {
        border-color: #007bff;
        outline: none;
    }
    .message-box {
        height: 150px;
        resize: vertical;
    }
    .submit-btn {
        background: #007bff;
        color: white;
        border: none;
        padding: 12px 30px;
        border-radius: 4px;
        cursor: pointer;
        transition: background 0.3s;
    }
    .submit-btn:hover {
        background: #0056b3;
    }
    .map-container {
        height: 100%;
        min-height: 400px;
    }
    .map-container iframe {
        width: 100%;
        height: 100%;
        border: none;
        border-radius: 4px;
    }
    .flashes {
        margin-bottom: 20px;
    }
</style>
{% endblock %}

{% block content %}
<section class="contact-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-6">
                <h2 class="mb-4">Contactez-nous</h2>
                
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        <div class="flashes">
                            {% for category, message in messages %}
                                <div class="alert alert-{{ category }} alert-dismissible fade show">
                                    {{ message }}
                                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                            {% endfor %}
                        </div>
                    {% endif %}
                {% endwith %}
                
                <form method="POST" class="contact-form" novalidate>
                    {{ form.hidden_tag() }}
                    
                    <div class="form-group">
                        {{ form.nom.label(class="form-label") }}
                        {{ form.nom(class="form-control") }}
                        {% if form.nom.errors %}
                            <small class="text-danger">{{ form.nom.errors[0] }}</small>
                        {% endif %}
                    </div>
                    
                    <div class="form-group">
                        {{ form.telephone.label(class="form-label") }}
                        {{ form.telephone(class="form-control") }}
                        {% if form.telephone.errors %}
                            <small class="text-danger">{{ form.telephone.errors[0] }}</small>
                        {% endif %}
                    </div>
                    
                    <div class="form-group">
                        {{ form.email.label(class="form-label") }}
                        {{ form.email(class="form-control") }}
                        {% if form.email.errors %}
                            <small class="text-danger">{{ form.email.errors[0] }}</small>
                        {% endif %}
                    </div>
                    
                    <div class="form-group">
                        {{ form.message.label(class="form-label") }}
                        {{ form.message(class="form-control message-box") }}
                        {% if form.message.errors %}
                            <small class="text-danger">{{ form.message.errors[0] }}</small>
                        {% endif %}
                    </div>
                    
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-paper-plane mr-2"></i>Envoyer
                    </button>
                </form>
            </div>
            
            <div class="col-lg-6">
                <div class="map-container mt-4 mt-lg-0">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m21!1m12!1m3!1d62522.36923520951!2d27.43391923463733!3d-11.648407193097452!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m6!3e6!4m0!4m3!3m2!1d-11.6484942!2d27.475205!5e0!3m2!1sfr!2scd!4v1709018156431!5m2!1sfr!2scd" 
                            allowfullscreen="" 
                            loading="lazy" 
                            referrerpolicy="no-referrer-when-downgrade">
                    </iframe>
                </div>
                
                <div class="contact-info mt-4">
                    <h4>Nos coordonn√©es</h4>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-map-marker-alt mr-2"></i> {{ site_config.address }}</li>
                        <li><i class="fas fa-phone mr-2"></i> {{ site_config.phone }}</li>
                        <li><i class="fas fa-envelope mr-2"></i> {{ site_config.email }}</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}